# Demo数据初始化功能

## 功能概述

系统启动时会自动创建一套完整的Demo数据，用于展示项目管理工具的各项功能。这些数据包括用户、项目、各种类型的Issues以及相应的状态配置。

## 自动创建的数据

### 1. 用户账户

#### Demo用户 (demo_user)
- **邮箱**: demo_user@example.com
- **密码**: demo123456
- **角色**: 普通用户
- **显示名**: Demo用户

#### Demo管理员 (demo_manager)
- **邮箱**: demo_manager@example.com
- **密码**: demo123456
- **角色**: 普通用户 + 项目经理
- **显示名**: Demo管理员

### 2. Demo项目

- **项目Key**: DEMO
- **项目名称**: Demo项目管理示例
- **可见性**: 公开
- **创建者**: demo_manager

### 3. 项目成员

- **demo_user**: 项目成员 (member)
- **demo_manager**: 项目经理 (project_manager)

### 4. Issue状态配置

#### 需求状态 (Requirement)
- 待分析 (open) - 初始状态
- 分析中 (analyzing)
- 已确认 (approved)
- 已拒绝 (rejected) - 最终状态

#### 任务状态 (Task)
- 待办 (todo) - 初始状态
- 进行中 (in_progress)
- 测试中 (testing)
- 已完成 (done) - 最终状态

#### Bug状态 (Bug)
- 待修复 (open) - 初始状态
- 修复中 (fixing)
- 测试中 (testing)
- 已修复 (resolved) - 最终状态

### 5. Demo Issues

#### 需求 (Requirements)
1. **DEMO_1**: 用户登录功能需求
   - 状态: 已确认
   - 优先级: 高
   - 故事点: 8
   - 预估工时: 16小时
   - 实际工时: 12.5小时

2. **DEMO_2**: 项目管理看板功能
   - 状态: 分析中
   - 优先级: 中
   - 故事点: 13
   - 预估工时: 24小时

#### 任务 (Tasks)
3. **DEMO_3**: 设计登录页面UI
   - 状态: 已完成
   - 优先级: 高
   - 故事点: 3
   - 预估工时: 4小时
   - 实际工时: 3.5小时

4. **DEMO_4**: 实现登录API接口
   - 状态: 进行中
   - 优先级: 高
   - 故事点: 5
   - 预估工时: 8小时
   - 实际工时: 4小时

5. **DEMO_5**: 前端登录组件开发
   - 状态: 测试中
   - 优先级: 高
   - 故事点: 5
   - 预估工时: 6小时
   - 实际工时: 5小时

6. **DEMO_6**: 看板组件设计
   - 状态: 待办
   - 优先级: 中
   - 故事点: 8
   - 预估工时: 12小时

#### 子任务 (Sub-tasks)
7. **DEMO_7**: 登录表单验证
   - 状态: 已完成
   - 优先级: 中
   - 故事点: 2
   - 预估工时: 2小时
   - 实际工时: 1.5小时

8. **DEMO_8**: JWT Token处理
   - 状态: 进行中
   - 优先级: 高
   - 故事点: 3
   - 预估工时: 4小时
   - 实际工时: 2小时

#### Bug (Bugs)
9. **DEMO_9**: 登录页面在移动端显示异常
   - 状态: 修复中
   - 优先级: 高
   - 严重程度: 主要
   - 故事点: 2
   - 预估工时: 3小时
   - 实际工时: 1小时

10. **DEMO_10**: API接口返回错误状态码
    - 状态: 待修复
    - 优先级: 紧急
    - 严重程度: 严重
    - 故事点: 3
    - 预估工时: 4小时

## 功能特点

### 1. 完整的项目生命周期
- 从需求分析到任务实现，再到Bug修复
- 展示了不同类型Issues的完整流程

### 2. 工时管理
- 预估工时 vs 实际工时对比
- 支持故事点估算
- 工时统计和分析

### 3. 优先级和严重程度
- 需求、任务、Bug都有相应的优先级设置
- Bug还有严重程度分类

### 4. 标签系统
- 使用标签对Issues进行分类
- 便于筛选和查找

### 5. 用户角色
- 普通用户和项目经理角色
- 不同的权限和职责

## 使用方法

1. 启动系统后，Demo数据会自动创建
2. 使用以下账户登录系统：
   - demo_user@example.com / demo123456
   - demo_manager@example.com / demo123456
3. 查看DEMO项目，体验各种功能

## 测试验证

可以使用提供的测试脚本验证Demo数据：

```bash
cd server
node test-demo-data.js
```

该脚本会检查：
- 用户是否正确创建
- 项目信息是否正确
- 项目成员关系是否正确
- Issue状态配置是否完整
- Issues数据是否完整
- 工时统计是否正确

## 技术实现

### 文件结构
- `server/src/modules/demo-data/demo-data.service.ts` - Demo数据服务
- `server/src/modules/demo-data/demo-data.module.ts` - Demo数据模块
- `server/src/app.initializer.ts` - 应用初始化器（调用Demo数据初始化）

### 初始化流程
1. 系统启动时，`AppInitializer` 被调用
2. 先初始化管理员用户
3. 然后调用 `DemoDataService.initializeDemoData()`
4. 创建用户、项目、成员关系、状态配置、Issues

### 数据安全
- 如果数据已存在，会跳过创建，避免重复
- 初始化失败不会影响系统启动
- 使用事务确保数据一致性

## 注意事项

1. Demo数据只在首次启动时创建，不会重复创建
2. 如果需要重新创建Demo数据，需要先删除现有数据
3. Demo用户密码为弱密码，仅用于演示
4. 生产环境建议禁用Demo数据初始化功能

# 用户管理功能说明

## 功能概述

用户管理功能提供了完整的用户生命周期管理，包括用户的创建、编辑、删除、状态管理以及角色分配等功能。

## 功能特性

### 1. 用户列表管理
- **用户列表展示**：显示所有用户的基本信息（头像、姓名、邮箱、状态、创建时间）
- **搜索功能**：支持按姓名或邮箱搜索用户
- **状态筛选**：支持按用户状态（活跃/禁用）筛选
- **分页支持**：支持分页浏览用户列表
- **排序功能**：支持按姓名、邮箱、创建时间排序

### 2. 用户CRUD操作
- **创建用户**：管理员可以创建新用户，设置基本信息
- **编辑用户**：可以修改用户的基本信息（姓名、头像、状态等）
- **删除用户**：可以删除用户（会同时删除相关的项目成员关系）
- **状态管理**：可以启用/禁用用户账户

### 3. 用户角色管理
- **角色查看**：查看用户在各个项目中的角色
- **角色编辑**：编辑用户在项目中的角色（待实现）
- **成员关系管理**：管理用户与项目的关联关系

## 权限控制

### 访问权限
- **用户管理页面**：只有 `admin` 和 `project_manager` 角色可以访问
- **用户操作**：只有 `admin` 和 `project_manager` 角色可以执行用户管理操作

### 角色层级
- **admin**：系统管理员，拥有所有权限
- **project_manager**：项目管理员，可以管理用户
- **member**：普通成员，只能查看自己的信息
- **viewer**：观察者，只读权限

## 技术实现

### 后端实现
- **控制器**：`UsersController` 提供RESTful API
- **服务层**：`UsersService` 处理业务逻辑
- **数据层**：基于TypeORM的数据库操作
- **权限控制**：使用JWT认证和角色守卫

### 前端实现
- **页面组件**：`Users.vue` 用户管理主页面
- **路由配置**：集成到主路由系统
- **导航菜单**：添加到侧边栏导航
- **权限控制**：基于用户角色的UI控制

## API接口

### 用户管理接口
- `GET /users` - 获取用户列表（支持分页、搜索、筛选）
- `GET /users/:id` - 获取用户详情
- `POST /users` - 创建用户
- `PATCH /users/:id` - 更新用户信息
- `DELETE /users/:id` - 删除用户
- `PATCH /users/:id/status` - 更新用户状态
- `GET /users/:id/memberships` - 获取用户项目成员关系

## 使用说明

### 管理员操作流程
1. **登录系统**：使用管理员账户登录
2. **进入用户管理**：点击侧边栏"用户管理"菜单
3. **查看用户列表**：浏览所有用户信息
4. **搜索用户**：使用搜索框快速找到特定用户
5. **管理用户**：执行创建、编辑、删除等操作
6. **角色管理**：查看和编辑用户在项目中的角色

### 用户状态说明
- **活跃（active）**：用户可以正常登录和使用系统
- **禁用（inactive）**：用户无法登录系统，但数据保留

## 安全考虑

1. **密码安全**：密码使用SHA256哈希存储
2. **权限验证**：所有操作都需要相应的角色权限
3. **数据完整性**：删除用户时会清理相关的成员关系
4. **输入验证**：邮箱唯一性检查，必填字段验证

## 扩展功能

### 待实现功能
- **批量操作**：支持批量启用/禁用用户
- **用户导入**：支持从CSV文件批量导入用户
- **角色编辑**：在用户管理页面直接编辑项目角色
- **用户统计**：用户活跃度统计和报表
- **密码重置**：管理员可以重置用户密码

### 集成功能
- **项目成员管理**：与项目管理功能深度集成
- **权限继承**：支持基于项目的权限继承
- **审计日志**：记录用户管理操作的审计日志

## 权限与角色设计（RBAC）

### 1. 设计目标
- 清晰、可解释、默认安全（最小权限）。
- 支持项目级授权与系统级配置，满足常见小团队协作模式。

### 2. 角色层级
- 系统管理员（System Admin）：平台设置、租户/组织、备份、审计策略。
- 项目管理员（Project Admin）：项目配置、成员管理、看板与流程设置、版本/迭代管理。
- 成员（Member）：创建与处理事项、评论、附件、订阅、轻量报表。
- 观察者（Viewer）：只读访问。

### 3. 权限粒度（动作）
- 项目：查看、创建、编辑、归档、成员管理、导出。
- 事项：查看、创建、编辑、删除、状态流转、指派、关联。
- 看板：查看、列配置、WIP 配置、排序、批量移动。
- 迭代/版本：创建、编辑、完成/发布、回滚（仅记录）。
- 评论/附件：创建、编辑/删除（自有）、删除（管理员）。
- 文档：查看、创建、编辑、历史、发布。
- 集成/通知：配置、启停、重放、密钥轮换。

### 4. 角色到权限的默认映射（示例）
- Viewer：项目查看、事项查看、报表查看。
- Member：+ 事项创建/编辑/流转、评论附件、看板操作、订阅。
- Project Admin：+ 成员管理、看板配置、迭代/版本管理、导出、项目配置、Webhooks。
- System Admin：平台级设置、组织/租户、全项目只读与紧急接管。

### 5. 数据隔离
- 行级：基于 `project_id` 的作用域过滤。
- 字段级（可选）：对敏感字段做只读或隐藏（如工时、成本）。

### 6. 审计
- 记录权限变更、成员增删、密钥轮换、Webhook 重放；
- 事项状态流转记录操作者与时间；
- 导出行为审计与下载追踪。

### 7. 可配置策略（扩展）
- 自定义角色模板（项目级）；
- 规则引擎结合权限（如自动指派需满足可见性与角色约束）。



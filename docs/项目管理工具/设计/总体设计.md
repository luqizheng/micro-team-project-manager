## 总体设计（小型团队开发管理工具）

### 1. 目标与非目标
- **目标**：
  - 为 3-20 人小型研发团队提供轻量、易用的一体化项目与研发流程管理工具。
  - 支持敏捷迭代、需求/任务/缺陷管理、看板流转、文件文档协作、发布与版本跟踪、轻量工时与报表。
  - 低学习成本、开箱即用、可本地/私有化部署，良好的与 Git/IM/CI 的集成。
- **非目标**：
  - 不追求覆盖大型企业级复杂流程（如庞大流程引擎、预算/采购、人力等）。
  - 不内置重量级 DevOps 平台与代码托管，仅做“集成”。

### 2. 用户与角色
- **访客/观察者（Viewer）**：只读访问项目、需求与任务等。
- **成员（Member）**：可创建与认领任务、提交工时、参与评论协作。
- **项目管理员（Project Admin）**：维护项目配置、看板、版本、成员、权限与集成。
- **系统管理员（System Admin）**：平台级配置、租户/组织、备份与安全策略。

### 3. 核心价值与关键指标
- **核心价值**：让团队统一在一个简单工具中完成需求→任务→开发→提测→发布→复盘的闭环。
- **关键指标（北极星+支撑）**：
  - 周活跃项目数、周活跃成员数
  - 需求/任务从创建到完成的中位周期（Lead Time）
  - 迭代按时完成率、延期率
  - 缺陷修复平均周期、重开率
  - 使用集成（Git/CI/IM）触发的自动联动次数

### 4. 使用场景（User Journeys）
1) 产品提出需求 → 评审拆分 → 进入迭代 → 研发开发 → 提交 PR → 触发 CI → 测试提测 → 缺陷回归 → 发布归档。
2) 每日站会使用看板快速过卡，自动高亮逾期和阻塞项。
3) 缺陷从 IM 或邮件创建快速入口，自动关联版本与提交记录。
4) 发布后自动生成版本说明，汇总变更、已解决缺陷与风险项。

### 5. 功能模块
- **项目与空间**：项目创建、归档，成员管理，项目模板。
- **需求管理**：需求池、优先级、链接任务与缺陷、评审记录。
- **任务与看板**：自定义列（待办/进行中/阻塞/待验收/完成），WIP 限制、泳道、泳道内排序、批量移动。
- **缺陷管理**：严重级/优先级、状态流转、回归、重开、版本归属。
- **迭代与版本**：迭代规划、容量、燃尽图、版本发布、里程碑。
- **评论与协作**：@提及、引用块、富文本/Markdown、代码片段、表情与附件。
- **文档**：项目内轻文档，支持目录、全文搜索、版本快照。
- **搜索与筛选**：全局搜索、保存筛选器、订阅通知。
- **报表与度量**：燃尽、累积流图、周期/吞吐、缺陷趋势、个人与团队概览。
- **通知中心**：站内、邮件、Webhook；支持静默时段与聚合。
- **集成**：Git 托管（GitHub/GitLab/Gitee/自建）、CI（GitHub Actions/GitLab CI/Jenkins）、IM（企业微信/飞书/Slack）。
- **权限与角色**：细粒度操作控制、项目级可配置权限模板。

### 6. 非功能需求
- **易用性**：移动端可用的响应式 UI；关键操作≤3 步；支持键盘快捷键。
- **可靠性**：单体可用、支持水平扩展；关键数据每日备份；可观测性（日志/指标/告警）。
- **性能**：1 万项目/100 万事项量级下主要查询 < 300ms；列表分页与服务端过滤。
- **安全**：细粒度权限、审计日志、传输加密、密码策略、Web 安全（CSRF/XSS/SQL 注入防护）。
- **可维护性**：清晰的模块边界、领域模型与 API 合同；可灰度发布。
- **可扩展性**：插件化集成点（认证、Webhook、自动化规则、导入导出）。

### 7. 系统边界与上下游
- **输入**：来自 Git 的提交/PR/MR、CI 状态、IM 命令、用户操作。
- **输出**：通知、Webhook、报表导出、与 Wiki/文档同步。
- **外部系统**：Git 托管、CI、IM、企业身份（SSO/OIDC）、对象存储。

- **前端**：SPA（Vue 3 + Ant Design Vue），组件化看板/报表；PWA 支持。
- **后端**：RESTful + Webhook，事件总线支持异步联动；任务/通知异步队列。
- **存储**：关系型数据库（MySQL 8）+ 对象存储（附件/导出）。
- **搜索**：数据库全文检索或可选接入 OpenSearch。
- **集成层**：Git/CI/IM 适配器抽象；统一回调验签与重试策略。

### 9. 领域对象（概要）
- 组织 Organization、用户 User、项目 Project、成员 Membership
- 需求 Requirement、任务 Task、缺陷 Bug、迭代 Sprint、版本 Release
- 看板 Board/Column、评论 Comment、附件 Attachment、标签 Label
- 通知 Notification、订阅 Subscription、Webhook、报表 Report

### 10. 状态机（示例）
- 任务：Backlog → In Progress → Blocked → In Review → QA → Done
- 缺陷：New → Triage → Fixing → Verify → Reopen/Closed

### 11. 权限模型（概述）
- 基于角色（RBAC）+ 项目作用域；动作级权限（读/写/管理）。
- 支持私有项目、邀请链接、外部协作者只读。

### 12. 集成与自动化
- Git 提交信息关联任务/缺陷（如 `#TASK-123 done` 自动流转与记录）。
- CI 状态回写任务（构建失败自动标记阻塞并通知责任人）。
- Webhook 出站：事项变更、发布完成、迭代开始/结束。
- 可配置规则：关键词触发、定时汇总日报、自动指派。

### 13. 部署形态
- 单体部署（Docker Compose）与轻量分布式（前后端分离+队列+对象存储）。
- 私有化一键安装脚本，内置迁移与备份恢复能力。

### 14. MVP 范围
- 项目、需求/任务/缺陷、看板流转、迭代、评论、附件、通知（站内/邮件）、Git 集成（基本）、简单报表（燃尽/周期）。

### 15. 风险与权衡
- 范围蔓延：以 MVP 为准，按里程碑扩展。
- 集成碎片化：通过适配层与能力降级策略对齐。
- 性能与成本：优先做服务端分页与查询优化，搜索引擎可选。

### 16. 里程碑（建议）
- M0 原型（2 周）：核心信息架构与看板 Demo
- M1 MVP（4-6 周）：事项、看板、迭代、评论、通知、基础集成
- M2 可用（4 周）：缺陷深化、版本/发布、报表、权限细化
- M3 提升（持续）：移动端体验、自动化规则、插件生态

### 17. 术语表
- 事项（Issue）：需求/任务/缺陷的统称
- 看板（Board）：以流程列展示事项的工作方式
- 版本（Release）：一组变更的可交付产物快照



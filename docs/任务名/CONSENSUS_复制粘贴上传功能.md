# CONSENSUS_复制粘贴上传功能

## 明确的需求描述

为 `ByteMDEditor.vue` 组件添加复制粘贴上传功能，使用户能够通过 Ctrl+V 快捷键直接粘贴图片和文件到编辑器中，实现与 `MarkdownEditor.vue` 和 `SimpleMarkdownEditor.vue` 一致的用户体验。

## 验收标准

### 功能验收标准
1. **复制粘贴检测**: 能够检测剪贴板中的图片和文件数据
2. **自动上传**: 粘贴后自动触发文件上传流程
3. **Markdown插入**: 上传成功后自动插入对应的Markdown链接
4. **错误处理**: 提供清晰的上传失败提示
5. **进度反馈**: 显示上传进度状态

### 技术验收标准
1. **API兼容**: 使用现有的预签名URL上传机制
2. **文件限制**: 支持10MB以下文件，支持图片、PDF、文档等格式
3. **代码质量**: 遵循项目现有代码规范和架构模式
4. **性能要求**: 不影响编辑器现有功能的性能

## 技术实现方案

### 核心实现策略
1. **事件监听**: 在ByteMD编辑器上添加 `paste` 事件监听器
2. **文件检测**: 检测剪贴板中的 `image/*` 类型数据
3. **上传复用**: 复用现有的 `uploadImages` 函数逻辑
4. **自动插入**: 利用ByteMD的API在光标位置插入Markdown链接

### 技术约束
- **文件大小限制**: 10MB
- **支持格式**: 图片、PDF、文档等（与现有编辑器保持一致）
- **上传机制**: 预签名URL + 表单直传
- **错误处理**: 使用Ant Design的message组件显示提示

### 集成方案
1. **最小侵入**: 在现有 `ByteMDEditor.vue` 基础上添加功能
2. **API复用**: 复用现有的上传相关函数和API调用
3. **配置扩展**: 在编辑器配置中添加粘贴事件处理
4. **样式保持**: 保持现有编辑器的样式和布局

## 任务边界限制

### 包含范围
- 仅修改 `ByteMDEditor.vue` 组件
- 添加复制粘贴事件处理逻辑
- 集成现有的文件上传机制

### 不包含范围
- 不修改后端API
- 不修改其他编辑器组件
- 不添加新的依赖包
- 不修改数据库结构

## 确认所有不确定性已解决

### 已确认的技术决策
1. **文件类型**: 支持所有现有编辑器支持的文件类型
2. **文件大小**: 保持10MB限制
3. **上传机制**: 使用现有的预签名URL机制
4. **错误处理**: 使用现有的message提示机制
5. **进度显示**: 复用现有的上传状态管理

### 实现复杂度评估
- **复杂度**: 低-中等（主要是事件处理和API集成）
- **风险**: 低（复用现有稳定功能）
- **时间估算**: 1-2小时

## 项目特性规范已对齐

### 与现有功能对齐
- 与 `MarkdownEditor.vue` 的复制粘贴功能保持一致
- 与 `SimpleMarkdownEditor.vue` 的复制粘贴功能保持一致
- 保持ByteMD编辑器的所有现有功能不变

### 用户体验对齐
- 提供与现有编辑器相同的粘贴体验
- 保持相同的上传进度和错误提示
- 维持一致的Markdown链接插入行为

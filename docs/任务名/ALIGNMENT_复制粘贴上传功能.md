# ALIGNMENT_复制粘贴上传功能

## 项目上下文分析

### 现有项目结构
- **前端技术栈**: Vue3 + Ant Design Vue + TypeScript
- **编辑器组件**: 已有三个Markdown编辑器组件
  - `MarkdownEditor.vue` - 完整功能编辑器，已实现复制粘贴上传
  - `SimpleMarkdownEditor.vue` - 简化版编辑器，已实现复制粘贴上传  
  - `ByteMDEditor.vue` - 基于ByteMD的编辑器，**缺少复制粘贴上传功能**
- **后端技术栈**: NestJS + TypeORM + MySQL
- **文件存储**: 使用预签名URL直传机制

### 现有文件上传功能
- **上传方式**: 预签名URL + 表单直传
- **支持格式**: 图片、PDF、文档等
- **存储路径**: `{projectId}/{issueId}/{timestamp}-{filename}`
- **自动插入**: 上传后自动插入Markdown链接

## 需求理解确认

### 原始需求
为 `ByteMDEditor.vue` 组件添加复制粘贴（copy & paste）方式上传文件和图片的功能。

### 边界确认
- **范围**: 仅针对 `ByteMDEditor.vue` 组件
- **功能**: 支持通过Ctrl+V粘贴图片和文件
- **兼容性**: 保持与现有上传机制一致
- **用户体验**: 与 `MarkdownEditor.vue` 和 `SimpleMarkdownEditor.vue` 保持一致

### 需求理解
1. **复制粘贴检测**: 监听 `paste` 事件，检测剪贴板中的图片和文件
2. **文件上传**: 复用现有的预签名URL上传机制
3. **自动插入**: 上传成功后自动插入Markdown链接到编辑器
4. **错误处理**: 提供友好的错误提示和进度反馈

### 疑问澄清
1. **文件类型限制**: 是否与现有编辑器保持相同的文件类型限制？
2. **文件大小限制**: 是否保持10MB的文件大小限制？
3. **上传进度**: 是否需要显示上传进度条？
4. **多文件支持**: 是否支持同时粘贴多个文件？

## 技术约束和集成方案

### 技术约束
- 必须与现有上传API兼容
- 保持ByteMD编辑器的现有功能不变
- 遵循项目现有的代码规范和架构模式

### 集成方案
- 复用现有的 `uploadImages` 函数逻辑
- 添加 `handlePaste` 事件处理器
- 在编辑器配置中添加粘贴事件监听
- 保持与现有组件的API一致性

## 验收标准
1. 能够通过Ctrl+V粘贴图片并自动上传
2. 能够通过Ctrl+V粘贴文件并自动上传
3. 上传成功后自动插入Markdown链接
4. 提供适当的上传进度和错误提示
5. 与现有编辑器功能保持一致的用户体验
